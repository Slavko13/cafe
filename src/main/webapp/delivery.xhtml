<f:view xmlns="http://www.w3c.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:a4j="http://richfaces.org/a4j"
        xmlns:rich="http://richfaces.org/rich"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:c="http://java.sun.com/jsp/jstl/core" locale="#{localeBean.locale}">


    <ui:composition template="/templates/main/mainTemplate.xhtml">
        <ui:define name="content">
            <p>#{msg['delivery_addres_input_message']}</p>
            <p>#{msg['delivery_order_number']}  <h:outputText value="#{deliveryBean.order.orderId}"/> </p>


            <p:dataTable class="main-container-table" value="#{deliveryBean.order.orderPoints}" var="orderPoint">
                <p:column headerText="#{msg['menu_table_header_goods']}">
                    <c:if test="#{localeBean.locale eq 'ru'}">
                        <h:outputText value="#{orderPoint.coffeeGrade.gradeNameRu}"/>
                    </c:if>

                    <c:if test="#{localeBean.locale eq 'en'}">
                        <h:outputText value="#{orderPoint.coffeeGrade.gradeNameEng}"/>
                    </c:if>
                </p:column>
                <p:column headerText="#{msg['menu_table_header_cupNumber']}">
                    <h:outputText value="#{orderPoint.cupCounter}" />
                </p:column>

                <f:facet name="footer">
                    <p>#{msg['menu_table_header_price']} <h:outputText value="#{deliveryBean.order.fullOrderPrice}" /> <b>TGR</b></p>
                </f:facet>

            </p:dataTable>

            <h:form id="delivery-type">

                <p:selectOneMenu id="option" value="#{deliveryBean.order.deliveryType}" >
                    <f:selectItem itemLabel="#{msg['delivery_choose_message']}" itemValue=""/>
                    <f:selectItem itemLabel="#{msg['info_delivery_type_delivery']}"  itemValue="DELIVERY" />
                    <f:selectItem itemLabel="#{msg['info_delivery_type_pickup']}" itemValue="PICKUP"  />
                    <f:ajax event="change" update=":delivery" render=":delivery"/>
                </p:selectOneMenu>
            </h:form>

            <h:form id="delivery">
                <h:panelGroup layout="block" id="delivery-form" rendered="#{deliveryBean.order.deliveryType == 'DELIVERY'}">
                    <h:outputLabel for="delviery-address">#{msg['delivery_input_address']}</h:outputLabel>
                    <p:inputText value="#{deliveryBean.order.deliveryAddress}" id="delviery-address" required="true"  />
                    <br/>
                    <h:outputLabel for="delviery-customer-name">#{msg['delivery_input_name']}</h:outputLabel>
                    <p:inputText value="#{deliveryBean.order.customerName}" id="delviery-customer-name" required="true"  />
                    <br/>
                    <h:outputLabel for="delivery-datetime">#{msg['delivery_input_datetime']}</h:outputLabel>
                    <p:calendar id="delivery-datetime"  value="#{deliveryBean.order.orderDatetime}" pattern="MM/dd/yyyy HH:mm:ss"  required="true"/>
                    <br/>
                </h:panelGroup>
                <p><p:commandButton value="#{msg['delivery_button_confirm']}" validateClient="false" action="#{deliveryBean.confirmOrder}"/></p>
            </h:form>
        </ui:define>
    </ui:composition>


</f:view>